#!/usr/bin/perl -s
use strict;
use warnings;

use File::Basename;

our $h;

msg_and_exit( "Simple eval based calculator", 0 ) if $h;
msg_and_exit( "", 1 ) unless @ARGV == 3;

my ( $x, $op, $y ) = @ARGV;
my $res = eval "$x $op $y";

msg_and_exit( "Does not compute", 1 ) unless $res;

printf "%s %s %s = %.2f\n", $x, $op, $y, $res;

sub msg_and_exit {
    my $msg = shift;
    my $ec = shift // 0;

    print "$msg\n" if $msg;

    my $prog = basename($0);

    print <<"EOF";
Usage:   $prog <operand1> <operator> <operand2>
Example: $prog 1 '**' 2
EOF

    exit($ec);
}
