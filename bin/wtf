#!/usr/bin/env python3
#
# Based on https://pymotw.com/3/cmd/index.html

import cmd

class InteractiveOrCommandline(cmd.Cmd):
    def do_docker_pkgs(self, line):
        """(Ubuntu) packages containing basic tools
        """
        print("apt-get update && apt-get install procps net-tools vim")

    def do_date(self, line):
        """common `date` formats
        """

        print('''
        Format/result         |       Command              
------------------------------+----------------------------
YY-MM-DD_hh:mm:ss             | date +%F_%T                
YYMMDD_hhmmss                 | date +%Y%m%d_%H%M%S        
YYMMDD_hhmmss (UTC version)   | date --utc +%Y%m%d_%H%M%SZ 
YYMMDD_hhmmss (with local TZ) | date +%Y%m%d_%H%M%S%Z      
YYMMSShhmmss                  | date +%Y%m%d%H%M%S         
YYMMSShhmmssnnnnnnnnn         | date +%Y%m%d%H%M%S%N       
Seconds since UNIX epoch:     | date +%s                   
Nanoseconds only:             | date +%N                   
Nanoseconds since UNIX epoch: | date +%s%N                 
ISO8601 UTC timestamp         | date --utc +%FT%TZ         
ISO8601 Local TZ timestamp    | date +%FT%T%Z              
''')

    def do_vim_config(self, line):
        """Vim config options I often use
        """
        print(':set tabstop=4 shiftwidth=4 expandtab')
        print(':set nofoldenable')
        print(':set textwidth=0')
        print(':syntax off')

    def do_vim_find(self, line):
        """find files within Vim
        """
        print(':grep -iR what .')
        print(':cw')

    def do_conv_hex2dec(self, line):
        """convert from hex to decimal
        """
        print("""perl -le 'print hex "0xAf"'""")
        print("""perl -le 'print hex   "aF"' # same""")

    def do_EOF(self, line):
        return True

if __name__ == '__main__':
    import sys
    if len(sys.argv) > 1:
        InteractiveOrCommandline().onecmd(' '.join(sys.argv[1:]))
    else:
        InteractiveOrCommandline().cmdloop()
