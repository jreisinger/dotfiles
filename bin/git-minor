#!/usr/bin/env perl
#
# Script that adds and commits modifications in git tracked files with a nice
# message. It gets called from an alias within ~/.gitconfig.
#
use strict;
use warnings;

my @files;

for (`git status --porcelain`) {
    my $status   = (split)[0];
    my $filename = (split)[1];
    next if $status ne 'M';    # only modified files (man git-status)
    push @files, $filename;
}

if ( not @files ) {
    print("--> No modified files ...\n");
    exit;
}

my $cmd = "git commit -am 'minor changes in " . join( ", ", @files ) . "'";
print("--> Going to exec '$cmd'\n");
exec $cmd;
